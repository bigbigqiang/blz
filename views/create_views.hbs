{{#section 'head'}}
    <link rel="stylesheet" href="/css/create_views.css">
    <link rel="stylesheet" href="/ztree/css/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" href="/css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="/css/ligature.css">
    <link rel="stylesheet" href="/css/fusion.css">
    <style>
        .sourceTree {border: 1px solid #ddd;}
    </style>
{{/section}}
<div class="row-fluid">
    <ul class="processStep span9 offset1">
        <li class="activeStep span4"><span>1.选择数据源</span></li>
        <li class="span4"><span>2.配置融合</span></li>
        <li class="span4"><span>3.保存视图</span></li>
    </ul>
</div>
<div class="row-fluid " id="viewStepOne">
    <div class="row-fluid">
        <div class="treeContainer span12">
            <div id="selectSource" class="span3">
                <div class="treeHead">
                    请选择数据库
                </div>
                <div class="sourceTree">
                    <ul id="tree1" class="ztree">
                    </ul>
                </div>
            </div>
            <div class="btnGroup span1">

                <button class="btn btn-dark  btn-remove"><i class="icon-chevron-left"></i></button>
                <button class="btn btn-dark btn-add"><i class="icon-chevron-right"></i></button>

            </div>
            <div id="cfgConnect" class="span3">
                <div class="treeHead">
                    已选择的数据源
                </div>
                <div class="sourceTree">
                    <ul id="tree2" class="ztree">

                    </ul>
                </div>
            </div>
            <div class="btnGroup span1">
                <button class="btn btn-dark btn-add"><i class="icon-chevron-left"></i></button>

                <button class="btn btn-dark btn-remove"><i class="icon-chevron-right"></i></button>
            </div>
            <div id="saveView" class="span3">
                <div class="treeHead">
                    请选择服务
                </div>
                <div class="sourceTree">
                    <ul id="tree3" class="ztree">

                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="stepBtn span3 offset9">
            <a class="btn  btn-next btn-abled">下一步</a>
        </div>
    </div>
</div>
<div class="row-fluid " id="viewStepTwo" style="display:none;">
    <div class="row-fluid">
        <div class="left_tree pull-left span2">
            <div class="treeHeader">数据库结构</div>
            <div class="sourceTree">
                <ul id="mixTree" class="ztree">

                </ul>
            </div>
        </div>
        <div class="span10">
            <div class="row-fluid" id="jsplumb-connect">
                <div class="row-fluid">
                    <div class="fusion-header ">
                        <label class="pull-left"><input id="query_condition" type="checkbox">条件查询</label>
                        <label class="pull-left"><input id="sort_condition" type="checkbox">排序</label>
                        <button id="queryTest" type="button" class="pull-right btn  btn-search">查询测试</button>
                    </div>
                </div>
                <div class="row-fluid">
                    <div id="jsplumb-canvas">
                        <div class="fusion-content jtk-demo-canvas canvas-wide statemachine-demo jtk-surface jtk-surface-nopan"
                         id="canvas">
                    </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid" id="search-result">
                <div class="queryTest-content">
                    <div class="fusion-header ">
                        <h4 class="pull-left">查询测试</h4>
                        <button id="queryTestBack" type="button" class="pull-right btn  btn-search">返回</button>
                    </div>
                    <div class="queryTestTable">
                        <table class="table table-striped table-hover table-bordered databaseType">
                            <thead></thead>
                            <tbody></tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="conditions">
            <div class="condition_left">
                <div class="fusion-header ">
                    查询条件
                    <button id="addInquire" type="button" class="pull-right btn addCondition">
                        <i class="icon-plus"></i>
                        添加
                    </button>
                </div>
                <div class="condition">
                    <label class="condition_label">条件1：</label>
                    <input type="text" class="input_content pull-left">
                    <select class="select_relationship pull-left">
                        <option>=</option>
                        <option>></option>
                        <option><</option>
                        <option>!=</option>
                        <option>IN</option>
                    </select>
                    <input type="text" class="input_content pull-left">
                    <button type="button" class="btn delete_condition"><i class="icon-trash"></i></button>
                </div>
            </div>
            <div id="select_condi_model">
                <select class="select_field pull-left select_val"></select>
                <input type="text" class="input_field select_val">

                <div class="selectCondiBtn">
                    <button type="button" id="confirmSelectCondi">确定</button>
                    <button type="button" id="cancelSelectCondi">取消</button>
                </div>
            </div>
            <div class="condition_right">
                <div class="fusion-header ">
                    排序条件
                    <button id="addSort" type="button" class="pull-right btn addCondition">
                        <i class="icon-plus"></i>
                        添加
                    </button>
                </div>
                <div class="condition">
                    <label class="condition_label">条件1：</label>
                    <select class="select_field pull-left">
                    </select>

                    <div name="ASC" class="condition_switch">
                        <span>ASC</span>
                        <span style="display: none;text-indent: 13px;">DESC</span>

                        <div class="switch_bar"></div>
                    </div>
                    <button type="button" class=" btn  delete_condition"><i class="icon-trash"></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="stepBtn span3 offset9">
            <a class="btn btn-prev btn-abled">上一步</a>
            <a class="btn  btn-next btn-abled">下一步</a>
        </div>
    </div>
</div>
<div class="tablebg-grey"></div>
<div class="changeLabel" style="display: none;">
    <h4>
        <i class="icon-edit"></i>选择链接关系<img src="image/portlet-remove-icon-white.png"/>
    </h4>

    <form>
        <p class="input-text">
            <label>连接类型</label>
            <select id="labelType" name="labelType">
                <option value="CROSSJOIN">CROSSJOIN</option>
                <option value="FULLJOIN">FULLJOIN</option>
                <option value="RIGHTJOIN">RIGHTJOIN</option>
                <option value="LEFTJOIN">LEFTJOIN</option>
                <option value="INNERJOIN">INNERJOIN</option>
            </select>
        </p>
        <p class="btn-form">
            <span><input type="button" value="确 定" id="confirmLabel"> </span>
        </p>
        <input type="hidden" name="flag" value="default"> <input type="hidden" name="target" value="self">
    </form>
</div>
<div class="row-fluid " id="viewStepThree" style="display:none;">
    <div class="row-fluid">
        <div class="saveViewForm form-horizontal span10 offset2" id="selectData">
            <p class="input-text control-group">
                <label class="control-label span2">视图名称：</label>
                <input type="text" id="viewName" name="viewName" class="span8">
                <em class="requiredStar">*</em><span>不能为空</span>
            </p>

            <p class="input-text control-group">
                <label class="control-label span2">视图备注：</label><input type="text" id="viewVersion" name="viewVersion"
                                                                       class="span8"><span>不能为空</span>
            </p>

            <p class="input-text control-group">
                <label class="control-label span2">视图权限：</label><select name="viewAuth" id="viewAuth" class="span8">
                <option value="0">所有人员</option>
            </select>
            </p>
        </div>
    </div>
    <div class="row-fluid">
        <div class="stepBtn span3 offset9">
            <a class="btn btn-prev btn-abled">上一步</a>
            <a class="btn btn-complete btn-abled">完成</a>
        </div>
    </div>
</div>
{{#section 'js'}}
    <script src="js/jsPlumb-2.2.3.js"></script>
    <script src="ztree/js/jquery.ztree.all.min.js"></script>
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/create_views.js"></script>
    <!--<script src="js/create_views2.js"></script>-->
{{/section}}